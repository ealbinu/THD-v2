gdjs.AnchorRuntimeBehavior=function(t,e,o){gdjs.RuntimeBehavior.call(this,t,e,o),this._relativeToOriginalWindowSize=!!e.relativeToOriginalWindowSize,this._leftEdgeAnchor=e.leftEdgeAnchor,this._rightEdgeAnchor=e.rightEdgeAnchor,this._topEdgeAnchor=e.topEdgeAnchor,this._bottomEdgeAnchor=e.bottomEdgeAnchor,this._invalidDistances=!0,this._leftEdgeDistance=0,this._rightEdgeDistance=0,this._topEdgeDistance=0,this._bottomEdgeDistance=0},gdjs.AnchorRuntimeBehavior.prototype=Object.create(gdjs.RuntimeBehavior.prototype),gdjs.registerBehavior("AnchorBehavior::AnchorBehavior",gdjs.AnchorRuntimeBehavior),gdjs.AnchorRuntimeBehavior.HorizontalAnchor={NONE:0,WINDOW_LEFT:1,WINDOW_RIGHT:2,PROPORTIONAL:3},gdjs.AnchorRuntimeBehavior.VerticalAnchor={NONE:0,WINDOW_TOP:1,WINDOW_BOTTOM:2,PROPORTIONAL:3},gdjs.AnchorRuntimeBehavior.prototype.updateFromBehaviorData=function(t,e){return t.leftEdgeAnchor!==e.leftEdgeAnchor&&(this._leftEdgeAnchor=e.leftEdgeAnchor),t.rightEdgeAnchor!==e.rightEdgeAnchor&&(this._rightEdgeAnchor=e.rightEdgeAnchor),t.topEdgeAnchor!==e.topEdgeAnchor&&(this._topEdgeAnchor=e.topEdgeAnchor),t.bottomEdgeAnchor!==e.bottomEdgeAnchor&&(this._bottomEdgeAnchor=e.bottomEdgeAnchor),t.relativeToOriginalWindowSize===e.relativeToOriginalWindowSize},gdjs.AnchorRuntimeBehavior.prototype.onActivate=function(){this._invalidDistances=!0},gdjs.AnchorRuntimeBehavior.prototype.doStepPreEvents=function(t){var e=t.getGame(),o=e.getGameResolutionWidth(),i=e.getGameResolutionHeight(),h=t.getLayer(this.owner.getLayer());if(this._invalidDistances){this._relativeToOriginalWindowSize&&(o=e.getOriginalWidth(),i=e.getOriginalHeight());var r=h.convertCoords(this.owner.getDrawableX(),this.owner.getDrawableY());this._leftEdgeAnchor===gdjs.AnchorRuntimeBehavior.HorizontalAnchor.WINDOW_LEFT?this._leftEdgeDistance=r[0]:this._leftEdgeAnchor===gdjs.AnchorRuntimeBehavior.HorizontalAnchor.WINDOW_RIGHT?this._leftEdgeDistance=o-r[0]:this._leftEdgeAnchor===gdjs.AnchorRuntimeBehavior.HorizontalAnchor.PROPORTIONAL&&(this._leftEdgeDistance=r[0]/o),this._topEdgeAnchor===gdjs.AnchorRuntimeBehavior.VerticalAnchor.WINDOW_TOP?this._topEdgeDistance=r[1]:this._topEdgeAnchor===gdjs.AnchorRuntimeBehavior.VerticalAnchor.WINDOW_BOTTOM?this._topEdgeDistance=i-r[1]:this._topEdgeAnchor===gdjs.AnchorRuntimeBehavior.VerticalAnchor.PROPORTIONAL&&(this._topEdgeDistance=r[1]/i);var n=h.convertCoords(this.owner.getDrawableX()+this.owner.getWidth(),this.owner.getDrawableY()+this.owner.getHeight());this._rightEdgeAnchor===gdjs.AnchorRuntimeBehavior.HorizontalAnchor.WINDOW_LEFT?this._rightEdgeDistance=n[0]:this._rightEdgeAnchor===gdjs.AnchorRuntimeBehavior.HorizontalAnchor.WINDOW_RIGHT?this._rightEdgeDistance=o-n[0]:this._rightEdgeAnchor===gdjs.AnchorRuntimeBehavior.HorizontalAnchor.PROPORTIONAL&&(this._rightEdgeDistance=n[0]/o),this._bottomEdgeAnchor===gdjs.AnchorRuntimeBehavior.VerticalAnchor.WINDOW_TOP?this._bottomEdgeDistance=n[1]:this._bottomEdgeAnchor===gdjs.AnchorRuntimeBehavior.VerticalAnchor.WINDOW_BOTTOM?this._bottomEdgeDistance=i-n[1]:this._bottomEdgeAnchor===gdjs.AnchorRuntimeBehavior.VerticalAnchor.PROPORTIONAL&&(this._bottomEdgeDistance=n[1]/i),this._invalidDistances=!1}else{var c=0,s=0,g=0,a=0;this._leftEdgeAnchor===gdjs.AnchorRuntimeBehavior.HorizontalAnchor.WINDOW_LEFT?c=this._leftEdgeDistance:this._leftEdgeAnchor===gdjs.AnchorRuntimeBehavior.HorizontalAnchor.WINDOW_RIGHT?c=o-this._leftEdgeDistance:this._leftEdgeAnchor===gdjs.AnchorRuntimeBehavior.HorizontalAnchor.PROPORTIONAL&&(c=this._leftEdgeDistance*o),this._topEdgeAnchor===gdjs.AnchorRuntimeBehavior.VerticalAnchor.WINDOW_TOP?s=this._topEdgeDistance:this._topEdgeAnchor===gdjs.AnchorRuntimeBehavior.VerticalAnchor.WINDOW_BOTTOM?s=i-this._topEdgeDistance:this._topEdgeAnchor===gdjs.AnchorRuntimeBehavior.VerticalAnchor.PROPORTIONAL&&(s=this._topEdgeDistance*i),this._rightEdgeAnchor===gdjs.AnchorRuntimeBehavior.HorizontalAnchor.WINDOW_LEFT?g=this._rightEdgeDistance:this._rightEdgeAnchor===gdjs.AnchorRuntimeBehavior.HorizontalAnchor.WINDOW_RIGHT?g=o-this._rightEdgeDistance:this._rightEdgeAnchor===gdjs.AnchorRuntimeBehavior.HorizontalAnchor.PROPORTIONAL&&(g=this._rightEdgeDistance*o),this._bottomEdgeAnchor===gdjs.AnchorRuntimeBehavior.VerticalAnchor.WINDOW_TOP?a=this._bottomEdgeDistance:this._bottomEdgeAnchor===gdjs.AnchorRuntimeBehavior.VerticalAnchor.WINDOW_BOTTOM?a=i-this._bottomEdgeDistance:this._bottomEdgeAnchor===gdjs.AnchorRuntimeBehavior.VerticalAnchor.PROPORTIONAL&&(a=this._bottomEdgeDistance*i);var d=h.convertInverseCoords(c,s),A=h.convertInverseCoords(g,a);this._rightEdgeAnchor!==gdjs.AnchorRuntimeBehavior.HorizontalAnchor.NONE&&this.owner.setWidth(A[0]-d[0]),this._bottomEdgeAnchor!==gdjs.AnchorRuntimeBehavior.VerticalAnchor.NONE&&this.owner.setHeight(A[1]-d[1]),this._leftEdgeAnchor!==gdjs.AnchorRuntimeBehavior.HorizontalAnchor.NONE&&this.owner.setX(d[0]+this.owner.getX()-this.owner.getDrawableX()),this._topEdgeAnchor!==gdjs.AnchorRuntimeBehavior.VerticalAnchor.NONE&&this.owner.setY(d[1]+this.owner.getY()-this.owner.getDrawableY())}},gdjs.AnchorRuntimeBehavior.prototype.doStepPostEvents=function(t){};