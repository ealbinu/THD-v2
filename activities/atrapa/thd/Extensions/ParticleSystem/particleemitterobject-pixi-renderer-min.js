gdjs.ParticleEmitterObjectPixiRenderer=function(e,t,r){var i=null,a=new PIXI.Graphics;if(a.lineStyle(0,0,0),a.beginFill(gdjs.rgbToHexNumber(255,255,255),1),"Point"===r.rendererType)a.drawCircle(0,0,r.rendererParam1);else if("Line"===r.rendererType)a.drawRect(r.rendererParam1,0,r.rendererParam1,r.rendererParam2),a.beginFill(gdjs.rgbToHexNumber(255,255,255),.001),a.drawRect(0,0,r.rendererParam1,r.rendererParam2);else if(r.textureParticleName){var n=new PIXI.Sprite(e.getGame().getImageManager().getPIXITexture(r.textureParticleName));n.width=r.rendererParam1,n.height=r.rendererParam2,a.addChild(n)}else a.drawRect(0,0,r.rendererParam1,r.rendererParam2);a.endFill(),i=e.getGame().getRenderer().getPIXIRenderer().generateTexture(a);var l={color:{list:[{value:gdjs.rgbToHexNumber(r.particleRed1,r.particleGreen1,r.particleBlue1).toString(16),time:0},{value:gdjs.rgbToHexNumber(r.particleRed2,r.particleGreen2,r.particleBlue2).toString(16),time:1}],isStepped:!1},acceleration:{x:r.particleGravityX,y:r.particleGravityY},lifetime:{min:r.particleLifeTimeMin,max:r.particleLifeTimeMax},frequency:r.flow<0?1e-4:1/r.flow,spawnChance:1,particlesPerWave:r.flow<0?r.maxParticleNb:1,maxParticles:r.maxParticleNb,emitterLifetime:r.tank<0?-1:r.flow<0?.001:r.tank/r.flow,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:r.zoneRadius}};if(l.speed={list:[{time:0,value:r.emitterForceMax}],minimumSpeedMultiplier:0!==r.emitterForceMax?r.emitterForceMin/r.emitterForceMax:1,isStepped:!1},"Mutable"===r.alphaParam?l.alpha={list:[{time:0,value:r.particleAlpha1/255},{time:1,value:r.particleAlpha2/255}],isStepped:!1}:l.alpha={list:[{time:0,value:r.particleAlpha1/255}],isStepped:!1},"Mutable"===r.sizeParam){var m=r.particleSize1/100,s=r.particleSize2/100,c=r.particleSizeRandomness1/100,o=r.particleSizeRandomness2/100,d=0!==o?(1+c)/(1+o):1;l.scale={list:[{time:0,value:m*(1+c)},{time:1,value:s*(1+o)}],minimumScaleMultiplier:d,isStepped:!1}}else{var m=r.particleSize1/100,s=r.particleSize2/100,p=0!==s?(1+m)/(1+s):1;0===s&&m>s&&(p=(1+s)/(1+m),s=m),l.scale={list:[{time:0,value:s}],minimumScaleMultiplier:p,isStepped:!1}}r.emissionEditionSimpleMode?l.startRotation={min:-r.emitterAngleB/2,max:r.emitterAngleB/2}:l.startRotation={min:r.emitterAngleA,max:r.emitterAngleB};var u=(r.particleLifeTimeMin+r.particleLifeTimeMax)/2;l.rotationSpeed={min:r.particleAngle1/u,max:r.particleAngle2/u},l.blendMode=r.additive?"ADD":"NORMAL",this.renderer=new PIXI.Container,this.emitter=new PIXI.particles.Emitter(this.renderer,i,l),this.emitter.emit=!0,this.started=!1;var g=e.getLayer(t.getLayer());g&&g.getRenderer().addRendererObject(this.renderer,t.getZOrder())},gdjs.ParticleEmitterObjectRenderer=gdjs.ParticleEmitterObjectPixiRenderer,gdjs.ParticleEmitterObjectPixiRenderer.prototype.getRendererObject=function(){return this.renderer},gdjs.ParticleEmitterObjectPixiRenderer.prototype.update=function(e){this.emitter.update(e),!this.started&&this.getParticleCount()>0&&(this.started=!0)},gdjs.ParticleEmitterObjectPixiRenderer.prototype.setPosition=function(e,t){this.emitter.spawnPos.x=e,this.emitter.spawnPos.y=t},gdjs.ParticleEmitterObjectPixiRenderer.prototype.setAngle=function(e,t){this.emitter.minStartRotation=e,this.emitter.maxStartRotation=t},gdjs.ParticleEmitterObjectPixiRenderer.prototype.setForce=function(e,t){this.emitter.startSpeed.value=t,this.emitter.minimumSpeedMultiplier=0!==t?e/t:1},gdjs.ParticleEmitterObjectPixiRenderer.prototype.setZoneRadius=function(e){this.emitter.spawnCircle.radius=e},gdjs.ParticleEmitterObjectPixiRenderer.prototype.setLifeTime=function(e,t){this.emitter.minLifetime=e,this.emitter.maxLifetime=t},gdjs.ParticleEmitterObjectPixiRenderer.prototype.setGravity=function(e,t){this.emitter.acceleration.x=e,this.emitter.acceleration.y=t},gdjs.ParticleEmitterObjectPixiRenderer.prototype.setColor=function(e,t,r,i,a,n){this.emitter.startColor.value.r=e,this.emitter.startColor.value.g=t,this.emitter.startColor.value.b=r,this.emitter.startColor.next=this.emitter.startColor.next||{time:1,value:{}},this.emitter.startColor.next.value.r=i,this.emitter.startColor.next.value.g=a,this.emitter.startColor.next.value.b=n},gdjs.ParticleEmitterObjectPixiRenderer.prototype.setSize=function(e,t){this.emitter.startScale.value=e/100,this.emitter.startScale.next&&(this.emitter.startScale.next.value=t/100)},gdjs.ParticleEmitterObjectPixiRenderer.prototype.setAlpha=function(e,t){this.emitter.startAlpha.value=e/255,this.emitter.startAlpha.next&&(this.emitter.startAlpha.next.value=t/255)},gdjs.ParticleEmitterObjectPixiRenderer.prototype.setFlow=function(e,t){this.emitter.frequency=e<0?1e-4:1/e,this.emitterLifetime=t<0?-1:e<0?.001:(t-this.emitter.totalParticleCount)/e},gdjs.ParticleEmitterObjectPixiRenderer.prototype.isTextureNameValid=function(e,t){var r=t.getGame().getImageManager().getInvalidPIXITexture(),i=t.getGame().getImageManager().getPIXITexture(e);return i.valid&&i!==r},gdjs.ParticleEmitterObjectPixiRenderer.prototype.setTextureName=function(e,t){var r=t.getGame().getImageManager().getInvalidPIXITexture(),i=t.getGame().getImageManager().getPIXITexture(e);i.valid&&i!==r&&(this.emitter.particleImages[0]=i)},gdjs.ParticleEmitterObjectPixiRenderer.prototype.getTotalParticleCount=function(){return this.emitter.totalParticleCount},gdjs.ParticleEmitterObjectPixiRenderer.prototype.getParticleCount=function(){return this.emitter.particleCount},gdjs.ParticleEmitterObjectPixiRenderer.prototype.stop=function(){this.emitter.emit=!1},gdjs.ParticleEmitterObjectPixiRenderer.prototype.recreate=function(){this.emitter.cleanup()},gdjs.ParticleEmitterObjectPixiRenderer.prototype.destroy=function(){this.emitter.destroy()},gdjs.ParticleEmitterObjectPixiRenderer.prototype.hasStarted=function(){return this.started};