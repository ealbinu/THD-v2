gdjs.evtTools.object=gdjs.evtTools.object||{},gdjs.evtTools.object.pickOnly=function(t,e){for(var o in t.items)if(t.items.hasOwnProperty(o)){var s=t.items[o];-1===s.indexOf(e)?s.length=0:(s.length=0,s.push(e))}},gdjs.evtTools.object.twoListsTest=function(t,e,o,s,r){var n=!1,c=gdjs.staticArray(gdjs.evtTools.object.twoListsTest);e.values(c);var a=gdjs.staticArray2(gdjs.evtTools.object.twoListsTest);o.values(a);for(var l=0,i=c.length;l<i;++l)for(var j=c[l],g=0,v=j.length;g<v;++g)j[g].pick=!1;for(var l=0,i=a.length;l<i;++l)for(var j=a[l],g=0,v=j.length;g<v;++g)j[g].pick=!1;for(var l=0,i=c.length;l<i;++l)for(var b=c[l],g=0,v=b.length;g<v;++g){for(var d=!1,f=0,T=a.length;f<T;++f)for(var u=a[f],h=0,O=u.length;h<O;++h)b[g].pick&&u[h].pick||b[g].id!==u[h].id&&t(b[g],u[h],r)&&(s||(n=!0,b[g].pick=!0,u[h].pick=!0),d=!0);!d&&s&&(n=!0,b[g].pick=!0)}for(var l=0,i=c.length;l<i;++l){for(var j=c[l],p=0,g=0,v=j.length;g<v;++g){var k=j[g];j[g].pick&&(j[p]=k,p++)}j.length=p}if(!s)for(var l=0,i=a.length;l<i;++l){for(var j=a[l],p=0,g=0,v=j.length;g<v;++g){var k=j[g];j[g].pick&&(j[p]=k,p++)}j.length=p}return n},gdjs.evtTools.object.pickObjectsIf=function(t,e,o,s){var r=!1,n=gdjs.staticArray(gdjs.evtTools.object.pickObjectsIf);e.values(n);for(var c=0,a=n.length;c<a;++c)for(var l=n[c],i=0,j=l.length;i<j;++i){var g=l[i];o^t(g,s)?(r=!0,g.pick=!0):g.pick=!1}for(var c=0,a=n.length;c<a;++c)gdjs.evtTools.object.filterPickedObjectsList(n[c]);return r},gdjs.evtTools.object.filterPickedObjectsList=function(t){for(var e=0,o=0,s=t.length;o<s;++o){var r=t[o];r.pick&&(t[e]=r,e++)}t.length=e},gdjs.evtTools.object.hitBoxesCollisionTest=function(t,e,o,s,r){return gdjs.evtTools.object.twoListsTest(gdjs.RuntimeObject.collisionTest,t,e,o,r)},gdjs.evtTools.object._distanceBetweenObjects=function(t,e,o){return t.getSqDistanceToObject(e)<=o},gdjs.evtTools.object.distanceTest=function(t,e,o,s){return gdjs.evtTools.object.twoListsTest(gdjs.evtTools.object._distanceBetweenObjects,t,e,s,o*o)},gdjs.evtTools.object._movesToward=function(t,e,o){if(t.hasNoForces())return!1;var s=Math.atan2(e.getDrawableY()+e.getCenterY()-(t.getDrawableY()+t.getCenterY()),e.getDrawableX()+e.getCenterX()-(t.getDrawableX()+t.getCenterX()));return s*=180/3.14159,Math.abs(gdjs.evtTools.common.angleDifference(t.getAverageForce().getAngle(),s))<=o/2},gdjs.evtTools.object.movesTowardTest=function(t,e,o,s){return gdjs.evtTools.object.twoListsTest(gdjs.evtTools.object._movesToward,t,e,s,o)},gdjs.evtTools.object._turnedToward=function(t,e,o){var s=Math.atan2(e.getDrawableY()+e.getCenterY()-(t.getDrawableY()+t.getCenterY()),e.getDrawableX()+e.getCenterX()-(t.getDrawableX()+t.getCenterX()));return s*=180/3.14159,Math.abs(gdjs.evtTools.common.angleDifference(t.getAngle(),s))<=o/2},gdjs.evtTools.object.turnedTowardTest=function(t,e,o,s){return gdjs.evtTools.object.twoListsTest(gdjs.evtTools.object._turnedToward,t,e,s,o)},gdjs.evtTools.object.pickAllObjects=function(t,e){for(var o in e.items)if(e.items.hasOwnProperty(o)){var s=t.getObjects(o),r=e.items[o];r.length=0,r.push.apply(r,s)}return!0},gdjs.evtTools.object.pickRandomObject=function(t,e){var o=0;for(var s in e.items)if(e.items.hasOwnProperty(s)){var r=e.items[s];o+=r.length}if(0===o)return!1;var n=Math.floor(Math.random()*o);n>=o&&(n=o-1);var c=0,a=null;for(var s in e.items)if(e.items.hasOwnProperty(s)){var r=e.items[s];if(n-c<r.length){a=r[n-c];break}c+=r.length}return gdjs.evtTools.object.pickOnly(e,a),!0},gdjs.evtTools.object.pickNearestObject=function(t,e,o,s){var r=null,n=0,c=!0,a=gdjs.staticArray(gdjs.evtTools.object.pickNearestObject);t.values(a);for(var l=0,i=a.length;l<i;++l)for(var j=a[l],g=0;g<j.length;++g){var v=j[g],b=v.getSqDistanceTo(e,o);(c||b<n^s)&&(n=b,r=v),c=!1}return!!r&&(gdjs.evtTools.object.pickOnly(t,r),!0)},gdjs.evtTools.object.raycastObject=function(t,e,o,s,r,n,c,a){return gdjs.evtTools.object.raycastObjectToPosition(t,e,o,e+r*Math.cos(s*Math.PI/180),o+r*Math.sin(s*Math.PI/180),n,c,a)},gdjs.evtTools.object.raycastObjectToPosition=function(t,e,o,s,r,n,c,a){var l=null,i=a?0:(s-e)*(s-e)+(r-o)*(r-o),j=0,g=0,v=gdjs.staticArray(gdjs.evtTools.object.raycastObjectToPosition);t.values(v);for(var b=0;b<v.length;b++)for(var d=v[b],f=0;f<d.length;f++){var T=d[f],u=T.raycastTest(e,o,s,r,!a);u.collision&&(!a&&u.closeSqDist<=i?(i=u.closeSqDist,l=T,j=u.closeX,g=u.closeY):a&&u.farSqDist>=i&&(i=u.farSqDist,l=T,j=u.farX,g=u.farY))}return!!l&&(gdjs.evtTools.object.pickOnly(t,l),n.setNumber(j),c.setNumber(g),!0)},gdjs.evtTools.object.doCreateObjectOnScene=function(t,e,o,s,r,n){var c=t.createObject(e);null!==c&&(c.setPosition(s,r),c.setLayer(n),o.containsKey(e)&&o.get(e).push(c))},gdjs.evtTools.object.createObjectOnScene=function(t,e,o,s,r){gdjs.evtTools.object.doCreateObjectOnScene(t,e.firstKey(),e,o,s,r)},gdjs.evtTools.object.createObjectFromGroupOnScene=function(t,e,o,s,r,n){gdjs.evtTools.object.doCreateObjectOnScene(t,o,e,s,r,n)},gdjs.evtTools.object.pickedObjectsCount=function(t){var e=0,o=gdjs.staticArray(gdjs.evtTools.object.pickedObjectsCount);t.values(o);for(var s=0,r=o.length;s<r;++s)e+=o[s].length;return e};