gdjs.PixiImageManager=function(e){this._resources=e,this._invalidTexture=PIXI.Texture.from("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAFElEQVQoU2P8z/D/PwMewDgyFAAApMMX8Zi0uXAAAAAASUVORK5CYIIA"),this._loadedTextures=new Hashtable},gdjs.ImageManager=gdjs.PixiImageManager,gdjs.PixiImageManager.prototype.setResources=function(e){this._resources=e},gdjs.PixiImageManager.prototype.getPIXITexture=function(e){if(this._loadedTextures.containsKey(e))return this._loadedTextures.get(e);if(""===e)return this._invalidTexture;if(this._resources){for(var r=null,t=0,i=this._resources.length;t<i;++t){var o=this._resources[t];if(o.name===e&&"image"===o.kind){r=PIXI.Texture.from(o.file);break}}if(null!==r)return console.log('Loaded texture for resource "'+e+'".'),this._loadedTextures.put(e,r),r}return console.warn('Unable to find texture for resource "'+e+'".'),this._invalidTexture},gdjs.PixiImageManager.prototype.getPIXIVideoTexture=function(e){if(this._loadedTextures.containsKey(e))return this._loadedTextures.get(e);if(""===e)return this._invalidTexture;if(this._resources){for(var r=null,t=0,i=this._resources.length;t<i;++t){var o=this._resources[t];if(o.name===e&&"video"===o.kind){r=PIXI.Texture.from(o.file);break}}if(null!==r)return console.log('Loaded video texture for resource "'+e+'".'),this._loadedTextures.put(e,r),r}return console.warn('Unable to find video texture for resource "'+e+'".'),this._invalidTexture},gdjs.PixiImageManager.prototype.getInvalidPIXITexture=function(){return this._invalidTexture},gdjs.PixiImageManager.prototype.loadTextures=function(e,r){for(var t=this._resources,i={},o=0,n=t.length;o<n;++o){var s=t[o];if(s.file&&"image"===s.kind){if(this._loadedTextures.containsKey(s.name))continue;i[s.file]=i[s.file]?i[s.file].concat(s):[s]}}var a=Object.keys(i).length;if(0===a)return r(a);var u=PIXI.Loader.shared,d=this,l=0,f=u.onProgress.add(function(){l++,e(l,a)});for(var g in i)i.hasOwnProperty(g)&&u.add(g,g);u.load(function(e,t){e.onProgress.detach(f);for(var o in t)if(t.hasOwnProperty(o)){if(!i.hasOwnProperty(o))continue;i[o].forEach(function(e){d._loadedTextures.put(e.name,t[o].texture),e.smoothed||(t[o].texture.baseTexture.scaleMode=PIXI.SCALE_MODES.NEAREST)})}r(a)})};