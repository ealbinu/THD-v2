!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.rbush=t()}}(function(){var t,i,n;return function t(i,n,e){function r(h,o){if(!n[h]){if(!i[h]){var s="function"==typeof require&&require;if(!o&&s)return s(h,!0);if(a)return a(h,!0);var f=new Error("Cannot find module '"+h+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[h]={exports:{}};i[h][0].call(l.exports,function(t){var n=i[h][1][t];return r(n||t)},l,l.exports,t,i,n,e)}return n[h].exports}for(var a="function"==typeof require&&require,h=0;h<e.length;h++)r(e[h]);return r}({1:[function(t,i,n){"use strict";function e(t,i){if(!(this instanceof e))return new e(t,i);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&this._initFormat(i),this.clear()}function r(t,i,n){if(!n)return i.indexOf(t);for(var e=0;e<i.length;e++)if(n(t,i[e]))return e;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,e,r){r||(r=p(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var a=i,h;a<n;a++)h=t.children[a],o(r,t.leaf?e(h):h);return r}function o(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function f(t,i){return t.minY-i.minY}function l(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function c(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function m(t,i){var n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),r=Math.min(t.maxX,i.maxX),a=Math.min(t.maxY,i.maxY);return Math.max(0,r-n)*Math.max(0,a-e)}function d(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function x(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function M(t,i,n,e,r){for(var a=[i,n],h;a.length;)n=a.pop(),i=a.pop(),n-i<=e||(h=i+Math.ceil((n-i)/e/2)*e,g(t,h,i,n,r),a.push(i,h,h,n))}i.exports=e;var g=t("quickselect");e.prototype={all:function(){return this._all(this.data,[])},search:function(t){var i=this.data,n=[],e=this.toBBox;if(!x(t,i))return n;for(var r=[],a,h,o,s;i;){for(a=0,h=i.children.length;a<h;a++)o=i.children[a],s=i.leaf?e(o):o,x(t,s)&&(i.leaf?n.push(o):d(t,s)?this._all(o,n):r.push(o));i=r.pop()}return n},collides:function(t){var i=this.data,n=this.toBBox;if(!x(t,i))return!1;for(var e=[],r,a,h,o;i;){for(r=0,a=i.children.length;r<a;r++)if(h=i.children[r],o=i.leaf?n(h):h,x(t,o)){if(i.leaf||d(t,o))return!0;e.push(h)}i=e.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}var e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){var r=this.data;this.data=e,e=r}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=p([]),this},remove:function(t,i){if(!t)return this;for(var n=this.data,e=this.toBBox(t),a=[],h=[],o,s,f,l;n||a.length;){if(n||(n=a.pop(),s=a[a.length-1],o=h.pop(),l=!0),n.leaf&&-1!==(f=r(t,n.children,i)))return n.children.splice(f,1),a.push(n),this._condense(a),this;l||n.leaf||!d(n,e)?s?(o++,n=s.children[o],l=!1):n=null:(a.push(n),h.push(o),o=0,s=n,n=n.children[0])}return this},toBBox:function(t){return t},compareMinX:s,compareMinY:f,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},_build:function(t,i,n,e){var r=n-i+1,h=this._maxEntries,o;if(r<=h)return o=p(t.slice(i,n+1)),a(o,this.toBBox),o;e||(e=Math.ceil(Math.log(r)/Math.log(h)),h=Math.ceil(r/Math.pow(h,e-1))),o=p([]),o.leaf=!1,o.height=e;var s=Math.ceil(r/h),f=s*Math.ceil(Math.sqrt(h)),l,u,c,m;for(M(t,i,n,f,this.compareMinX),l=i;l<=n;l+=f)for(c=Math.min(l+f-1,n),M(t,l,c,s,this.compareMinY),u=l;u<=c;u+=s)m=Math.min(u+s-1,c),o.children.push(this._build(t,u,m,e-1));return a(o,this.toBBox),o},_chooseSubtree:function(t,i,n,e){for(var r,a,h,o,s,f,u,m;;){if(e.push(i),i.leaf||e.length-1===n)break;for(u=m=1/0,r=0,a=i.children.length;r<a;r++)h=i.children[r],s=l(h),f=c(t,h)-s,f<m?(m=f,u=s<u?s:u,o=h):f===m&&s<u&&(u=s,o=h);i=o||i.children[0]}return i},_insert:function(t,i,n){var e=this.toBBox,r=n?t:e(t),a=[],h=this._chooseSubtree(r,this.data,i,a);for(h.children.push(t),o(h,r);i>=0&&a[i].children.length>this._maxEntries;)this._split(a,i),i--;this._adjustParentBBoxes(r,a,i)},_split:function(t,i){var n=t[i],e=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,e);var h=this._chooseSplitIndex(n,r,e),o=p(n.children.splice(h,n.children.length-h));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},_splitRoot:function(t,i){this.data=p([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,i,n){var e,r,a,o,s,f,u,c;for(f=u=1/0,e=i;e<=n-i;e++)r=h(t,0,e,this.toBBox),a=h(t,e,n,this.toBBox),o=m(r,a),s=l(r)+l(a),o<f?(f=o,c=e,u=s<u?s:u):o===f&&s<u&&(u=s,c=e);return c},_chooseSplitAxis:function(t,i,n){var e=t.leaf?this.compareMinX:s,r=t.leaf?this.compareMinY:f;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,r)&&t.children.sort(e)},_allDistMargin:function(t,i,n,e){t.children.sort(e);var r=this.toBBox,a=h(t,0,i,r),s=h(t,n-i,n,r),f=u(a)+u(s),l,c;for(l=i;l<n-i;l++)c=t.children[l],o(a,t.leaf?r(c):c),f+=u(a);for(l=n-i-1;l>=i;l--)c=t.children[l],o(s,t.leaf?r(c):c),f+=u(s);return f},_adjustParentBBoxes:function(t,i,n){for(var e=n;e>=0;e--)o(i[e],t)},_condense:function(t){for(var i=t.length-1,n;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children,n.splice(n.indexOf(t[i]),1)):this.clear():a(t[i],this.toBBox)},_initFormat:function(t){var i=["return a"," - b",";"];this.compareMinX=new Function("a","b",i.join(t[0])),this.compareMinY=new Function("a","b",i.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},{quickselect:2}],2:[function(t,i,n){"use strict";function e(t,i,n,a,h){for(;a>n;){if(a-n>600){var o=a-n+1,s=i-n+1,f=Math.log(o),l=.5*Math.exp(2*f/3),u=.5*Math.sqrt(f*l*(o-l)/o)*(s-o/2<0?-1:1);e(t,i,Math.max(n,Math.floor(i-s*l/o+u)),Math.min(a,Math.floor(i+(o-s)*l/o+u)),h)}var c=t[i],m=n,d=a;for(r(t,n,i),h(t[a],c)>0&&r(t,n,a);m<d;){for(r(t,m,d),m++,d--;h(t[m],c)<0;)m++;for(;h(t[d],c)>0;)d--}0===h(t[n],c)?r(t,n,d):(d++,r(t,d,a)),d<=i&&(n=d+1),i<=d&&(a=d-1)}}function r(t,i,n){var e=t[i];t[i]=t[n],t[n]=e}function a(t,i){return t<i?-1:t>i?1:0}i.exports=e},{}]},{},[1])(1)});